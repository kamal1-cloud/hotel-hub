
# =================================================
# SHARED CONFIGURATION (Applies to ALL profiles)
# =================================================
quarkus.application.name=hotel-hub
quarkus.application.version=1.0.0

# Database type and Liquibase config are the same everywhere
quarkus.datasource.db-kind=postgresql
quarkus.liquibase.migrate-at-start=true
quarkus.liquibase.change-log=db/changelog.xml

# Hibernate sequence naming configuration
quarkus.hibernate-orm.naming-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
quarkus.hibernate-orm.physical-naming-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# Cupid API client configuration
quarkus.rest-client.cupid-api.url=https://content-api.cupid.travel
quarkus.rest-client.cupid-api.connect-timeout=30000
quarkus.rest-client.cupid-api.read-timeout=60000
quarkus.rest-client.cupid-api.providers=com.hotelhub.client.CupidApiKeyFilter

# Custom retry configuration
cupid.api.max-retries=5
cupid.api.retry-delay=2000

# Rate limiting configuration
cupid.api.requests-per-minute=60
cupid.api.batch-delay=1000
cupid.api.circuit-breaker-failure-threshold=10
cupid.api.circuit-breaker-timeout=300000

# OpenAPI Documentation
quarkus.smallrye-openapi.info-title=Hotel Hub API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=A comprehensive hotel management API that consumes data from the Cupid API and provides enhanced search, filtering, and aggregation capabilities.

# Cache configuration
quarkus.cache.caffeine."hotel-by-id".initial-capacity=100
quarkus.cache.caffeine."hotel-by-id".maximum-size=1000
quarkus.cache.caffeine."hotel-by-id".expire-after-write=PT30M

quarkus.cache.caffeine."hotel-reviews".initial-capacity=50
quarkus.cache.caffeine."hotel-reviews".maximum-size=500
quarkus.cache.caffeine."hotel-reviews".expire-after-write=PT10M

quarkus.cache.caffeine."hotel-translations".initial-capacity=50
quarkus.cache.caffeine."hotel-translations".maximum-size=500
quarkus.cache.caffeine."hotel-translations".expire-after-write=PT1H

quarkus.cache.caffeine."hotel-photos".initial-capacity=50
quarkus.cache.caffeine."hotel-photos".maximum-size=500
quarkus.cache.caffeine."hotel-photos".expire-after-write=PT1H

quarkus.cache.caffeine."hotel-facilities".initial-capacity=50
quarkus.cache.caffeine."hotel-facilities".maximum-size=500
quarkus.cache.caffeine."hotel-facilities".expire-after-write=PT1H

quarkus.cache.caffeine."hotel-statistics".initial-capacity=1
quarkus.cache.caffeine."hotel-statistics".maximum-size=1
quarkus.cache.caffeine."hotel-statistics".expire-after-write=PT5M


# =================================================
# PRODUCTION PROFILE (Default - for docker-compose.yml)
# =================================================
# These properties are used when no specific profile is active.
quarkus.datasource.jdbc.url=jdbc:postgresql://db:5432/hotel_db
quarkus.datasource.username=hotel_user
quarkus.datasource.password=hotel_pass

# Database connection pool configuration
quarkus.datasource.jdbc.min-size=5
quarkus.datasource.jdbc.max-size=20
quarkus.datasource.jdbc.acquisition-timeout=10000
quarkus.datasource.jdbc.background-validation-interval=2M
quarkus.datasource.jdbc.validation-query-sql=SELECT 1
quarkus.datasource.jdbc.leak-detection-interval=10M

# Disable Dev Services in production
quarkus.datasource.devservices.enabled=false
# Use the production server URL for OpenAPI
quarkus.smallrye-openapi.servers=http://hotel-hub-app:8080


# =================================================
# DEVELOPMENT PROFILE (%dev - for 'mvn quarkus:dev')
# =================================================
# Overrides the default properties for local development.
# Connects to the DB you start with 'docker-compose.dev.yml'.
%dev.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/hotel_db
%dev.quarkus.datasource.username=hotel_user
%dev.quarkus.datasource.password=hotel_pass
# We provide our own DB, so disable Dev Services
%dev.quarkus.datasource.devservices.enabled=false
# Use the local server URL for OpenAPI
%dev.quarkus.smallrye-openapi.servers=http://localhost:8080


# =================================================
# TEST PROFILE (%test - for 'mvn test')
# =================================================
%test.quarkus.datasource.jdbc.url=
%test.quarkus.datasource.username=
%test.quarkus.datasource.password=
# Explicitly enable Dev Services for testing
%test.quarkus.datasource.devservices.enabled=true